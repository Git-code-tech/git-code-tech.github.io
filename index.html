<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Cache-Control" content="no-store" />
    <meta charset="utf-8" />
    <title>Dot Cards</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/snap.svg/0.5.1/snap.svg.js" integrity="sha512-2B4yJ2DGhmYITzY51PcSK5pxQilqi1Cl3wgI8dq8phWjbVAw9SmcaTZp+QsSCdV/xKkxttyYolU0usNNG1ICbQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js" type="text/javascript"></script>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet">
    <style>
        
        .vw {
            display:block;
            float:left;
            width: 90%;
            height: 90%;
            background-color:red;
            margin-left:10;
        }
    </style>

</head>
<body style="margin:0;padding:0px;background-color:black;">
 <input type="button" id="btn_dc" onclick="start();" value=" Add Circle " class="btn-s btn-sm left" /><span id="number" style="font-size:xx-large;"></span>
    <div class="container-fluid" style="background-color:yellow;padding:10px;">
        <div id="target" class="vw"></div>
    </div>
    <script>
            log("Init");
            var X = document.documentElement.clientWidth;
            var Y = document.documentElement.clientHeight;
          
            Y = Y-100;
            X = Y;
            var timetook = new Array();
            var matrix = new Array(X * Y);
            var Squrs = new Array();
            var circles = new Array();
            const Radious = 30;
            const target = document.getElementById("target");
            const s = new Snap(X, Y);
            const width = (Radious * 2);
            s.appendTo(target);
        function clear() {
            log('Clear');

            matrix.length = 0;
            Squrs.length = 0;
            circles.length = 0;
            performanceResult.length = 0;
            s.clear();
        }

        function log() {
            //console.log("drawcircles");
        }
        

            function speech(txt) {
            let synth = window.speechSynthesis;
            let utterThis = new SpeechSynthesisUtterance(txt);
            synth.speak(utterThis);
            }
                

        function drawcircles() {


            log("drawcircles");
            clear();

            let t0 = performance.now();
            let NOOFCIRCLES = getRndInteger(0, 50);
            document.getElementById("btn_dc").value = "(" + NOOFCIRCLES + ")";
            for (let qw = 0; qw < NOOFCIRCLES; qw++) {
                Squrs.push(createaRandomnumber());
            }
            for (let sqr = 0; sqr < Squrs.length; sqr++) {
                s.circle(Squrs[sqr].split(":")[0], Squrs[sqr].split(":")[1], Radious).attr({ "fill": "Red", "stroke": "green" });
            }
            speech(NOOFCIRCLES);
            let t1 = performance.now();
            performanceResult("Drawcircles ", (t1 - t0));
        }
        function isnumberinRange(x, y) {
            
            let t0 = performance.now();
            let t1 = 0;
            let checktemprange = getRange(x, y);
            for (let tempchkrange = 0; tempchkrange < checktemprange.length; tempchkrange++) {
                if (matrix[checktemprange[tempchkrange]] == true) {
                    t1 = performance.now()
                    performanceResult("isnumberinRange if ", (t1 - t0));
                    return true;
                }
            }
            t1 = performance.now();
            performanceResult("isnumberinRange ", (t1 - t0));
            return false;
        }

        function performanceResult(methodname, txt) {
            //log(methodname + " took " + txt + " milliseconds.");
            timetook.push(methodname + " took " + txt + " milliseconds.");
        }

        function getRange(x, y) {
            log("getRange");
            let t0 = performance.now();
            let range = new Array();

            let startingpoint = (((y - (Radious)) * X) + ((x - (Radious))));
            let endingpoint = (((y + (Radious)) * X) + ((x + (Radious))));
            let setRngei = startingpoint;
            while (startingpoint <= endingpoint) {
                if (setRngei >= (startingpoint + width + 1)) {
                    startingpoint = startingpoint + (X);
                    setRngei = startingpoint;
                }
                else {
                    range.push(setRngei);
                    setRngei++;
                }
            }
            let t1 = performance.now();
            performanceResult("getRange ", (t1 - t0));
            return range;
        }
        function setRange(x, y) {
            let t0 = performance.now();
            let temprange = getRange(x, y);
            //log(temprange);
            for (let tempmat = 0; tempmat < temprange.length; tempmat++) {
                matrix[temprange[tempmat]] = true;
            }
            let t1 = performance.now();
            
            performanceResult("setRange ", (t1 - t0));
        }
        function createaRandomnumber() {
            log("createaRandomnumber ");
            let t0 = performance.now();

            let x = 0, y = 0;
            x = getRndInteger(width, (X - width));
            y = getRndInteger(width, (Y - width));

            while (isnumberinRange(x, y)) {
                log("--> While");
                x = getRndInteger(width, (X - width));
                y = getRndInteger(width, (Y - width));
            }
            //log(x + ", " + y + "=" + ((y * X) + (x)));
            setRange(x, y);
            let t1 = performance.now();
            performanceResult("createaRandomnumber ", (t1 - t0));
            return x + ":" + y;
        }
        function getRndInteger(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        function start() {
            log('start');       
            //drawcircles();
            setInterval(drawcircles, 3000);
        }

    </script>
</body>
</html>
